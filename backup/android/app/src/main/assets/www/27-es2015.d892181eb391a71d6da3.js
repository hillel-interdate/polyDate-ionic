(window.webpackJsonp=window.webpackJsonp||[]).push([[27],{JybH:function(l,n,t){"use strict";t.r(n);var u=t("8Y7J"),e=t("yTNM"),i=t("ZZ/e");class o{constructor(l,n,t,u){this.router=l,this.alertCtrl=n,this.api=t,this.events=u}ionViewWillEnter(){this.api.pageName="InboxPage",this.api.back?this.api.back=!0:this.api.showLoad(),this.getDialogs(),this.events.subscribe("messages:new",l=>{this.getDialogs()})}ionViewWillLeave(){this.events.unsubscribe("messages:new")}getDialogs(){this.api.http.get(this.api.apiUrl+"/inbox",this.api.setHeaders(!0)).subscribe(l=>{console.log(l),this.users=l.dialogs,this.texts=l.texts,this.api.hideLoad()},l=>this.api.hideLoad())}toDialogPage(l){console.log(l),this.api.data.user=l,this.router.navigate(["/dialog"])}deleteDialog(l,n){console.log(l),this.alertCtrl.create({header:"\u05de\u05d7\u05d9\u05e7\u05ea \u05e9\u05d9\u05d7\u05d4 \u05e2\u05dd "+l.username,message:" ?\u05dc\u05de\u05d7\u05d5\u05e7 \u05d0\u05ea \u05d4\u05e9\u05d9\u05d7\u05d4",buttons:[{text:"\u05db\u05df",handler:()=>{this.api.storage.get("user_data").then(t=>{if(t){const u={user_id:t.user_id,contact_id:l.id};this.api.showLoad(),this.api.http.post(this.api.apiUrl+"/deletes/inboxes.json",u,this.api.header).subscribe(l=>{l.deleted?(this.users.splice(n,1),this.ionViewWillEnter(),console.log(this.users),this.api.hideLoad()):this.api.hideLoad()},l=>this.api.hideLoad())}})}},{text:"\u05dc\u05d0",role:"cancel"}]}).then(l=>l.present())}}class s{}var a=t("pMnS"),r=t("SVse"),c=t("oBZk"),b=t("iInd"),p=u.Ab({encapsulation:0,styles:[['@charset "UTF-8";.delete-dialog-icon[_ngcontent-%COMP%]{float:left;margin-top:-7px;font-size:22px;position:absolute;bottom:5px;right:7px}.date[_ngcontent-%COMP%]{font-size:12px;margin:8px 0}.name[_ngcontent-%COMP%]{font-size:16px}.container[_ngcontent-%COMP%]{height:calc(100% - 60px);overflow:auto}.ion-cart[_ngcontent-%COMP%]{border-radius:0;background-color:#fff;height:135px;--background:#fff}.counter[_ngcontent-%COMP%]{top:0;rihgt:0}.paying[_ngcontent-%COMP%]{left:68px;width:32px;height:26px}ion-card-content[_ngcontent-%COMP%]{padding:10px}ion-content[_ngcontent-%COMP%]{dislay:flex}.message-counter[_ngcontent-%COMP%]{display:block;position:absolute;min-height:24px;min-width:24px;text-align:center;background:#d50312;border-radius:50%;-webkit-border-radius:50%;font-size:13px;color:#fefdfd;top:1px;left:0;border:2px solid #fefdfd;box-shadow:4px 4px 5px 0 rgba(0,0,0,.75);box-sizing:border-box}']],data:{}});function d(l){return u.Wb(0,[(l()(),u.Cb(0,0,null,null,1,"div",[["class","no_results"]],null,null,null,null,null)),(l()(),u.Ub(1,null,["",""]))],null,(function(l,n){var t=n.component;l(n,1,0,null==t.texts?null:t.texts.no_results)}))}function g(l){return u.Wb(0,[(l()(),u.Cb(0,0,null,null,3,"div",[["class","usr_img"]],null,null,null,null,null)),u.Rb(512,null,r.w,r.x,[u.p,u.y,u.K]),u.Bb(2,278528,null,0,r.m,[r.w],{ngStyle:[0,"ngStyle"]},null),u.Qb(3,{"background-image":0})],(function(l,n){var t=l(n,3,0,"url("+n.component.api.url+n.parent.context.$implicit.photo+")");l(n,2,0,t)}),null)}function h(l){return u.Wb(0,[(l()(),u.Cb(0,0,null,null,1,"div",[["class","counter message-counter"]],null,null,null,null,null)),(l()(),u.Ub(1,null,["",""]))],null,(function(l,n){l(n,1,0,n.parent.context.$implicit.newMessagesNumber)}))}function f(l){return u.Wb(0,[(l()(),u.Cb(0,0,null,null,19,"ion-card",[["class","ion-cart"]],null,null,null,c.P,c.d)),u.Bb(1,49152,null,0,i.o,[u.j,u.p,u.F],null,null),(l()(),u.Cb(2,0,null,0,15,"ion-card-content",[],null,[[null,"click"]],(function(l,n,t){var u=!0;return"click"===n&&(u=!1!==l.component.toDialogPage(l.context.$implicit)&&u),u}),c.N,c.e)),u.Bb(3,49152,null,0,i.p,[u.j,u.p,u.F],null,null),(l()(),u.rb(16777216,null,0,1,null,g)),u.Bb(5,16384,null,0,r.j,[u.W,u.S],{ngIf:[0,"ngIf"]},null),(l()(),u.Cb(6,0,null,0,5,"ion-card-title",[],null,null,null,c.O,c.f)),u.Bb(7,49152,null,0,i.s,[u.j,u.p,u.F],null,null),(l()(),u.Cb(8,0,null,0,1,"div",[["class","name"]],null,null,null,null,null)),(l()(),u.Ub(9,null,["",""])),(l()(),u.Cb(10,0,null,0,1,"div",[["class","date"]],null,null,null,null,null)),(l()(),u.Ub(11,null,["",""])),(l()(),u.Cb(12,0,null,0,5,"div",[["class","message"]],null,null,null,null,null)),(l()(),u.Cb(13,0,null,null,2,"p",[],null,null,null,null,null)),(l()(),u.Ub(14,null,[" ","... "])),u.Pb(0,r.r,[]),(l()(),u.rb(16777216,null,null,1,null,h)),u.Bb(17,16384,null,0,r.j,[u.W,u.S],{ngIf:[0,"ngIf"]},null),(l()(),u.Cb(18,0,null,0,1,"ion-icon",[["class","delete-dialog-icon"],["name","trash"]],null,[[null,"click"]],(function(l,n,t){var u=!0;return"click"===n&&(u=!1!==l.component.deleteDialog(l.context.$implicit,l.context.index)&&u),u}),c.X,c.n)),u.Bb(19,49152,null,0,i.E,[u.j,u.p,u.F],{name:[0,"name"]},null)],(function(l,n){l(n,5,0,n.context.$implicit.photo),l(n,17,0,n.context.$implicit.newMessagesNumber>0),l(n,19,0,"trash")}),(function(l,n){l(n,9,0,n.context.$implicit.username),l(n,11,0,n.context.$implicit.date),l(n,14,0,u.Vb(n,14,0,u.Ob(n,15).transform(n.context.$implicit.message,0,45)))}))}function x(l){return u.Wb(0,[(l()(),u.Cb(0,0,null,null,6,"ion-header",[],null,null,null,c.W,c.m)),u.Bb(1,49152,null,0,i.D,[u.j,u.p,u.F],null,null),(l()(),u.Cb(2,0,null,0,4,"ion-toolbar",[],null,null,null,c.tb,c.J)),u.Bb(3,49152,null,0,i.Eb,[u.j,u.p,u.F],null,null),(l()(),u.Cb(4,0,null,0,2,"ion-title",[],null,null,null,c.rb,c.H)),u.Bb(5,49152,null,0,i.Cb,[u.j,u.p,u.F],null,null),(l()(),u.Ub(-1,0,["inbox"])),(l()(),u.Cb(7,0,null,null,7,"ion-content",[["padding",""]],null,null,null,c.S,c.i)),u.Bb(8,49152,null,0,i.w,[u.j,u.p,u.F],null,null),u.Bb(9,16384,null,0,i.f,[u.p],null,null),(l()(),u.rb(16777216,null,0,1,null,d)),u.Bb(11,16384,null,0,r.j,[u.W,u.S],{ngIf:[0,"ngIf"]},null),(l()(),u.Cb(12,0,null,0,2,"div",[["class","container"]],null,null,null,null,null)),(l()(),u.rb(16777216,null,null,1,null,f)),u.Bb(14,278528,null,0,r.i,[u.W,u.S,u.x],{ngForOf:[0,"ngForOf"]},null)],(function(l,n){var t=n.component;l(n,11,0,!(null!=t.users&&t.users.length)),l(n,14,0,t.users)}),null)}function m(l){return u.Wb(0,[(l()(),u.Cb(0,0,null,null,1,"page-inbox",[],null,null,null,x,p)),u.Bb(1,49152,null,0,o,[b.n,i.b,e.a,i.g],null,null)],null,null)}var C=u.yb("page-inbox",o,m,{},{},[]),M=t("s7LF");t.d(n,"InboxPageModuleNgFactory",(function(){return w}));var w=u.zb(s,[],(function(l){return u.Lb([u.Mb(512,u.m,u.jb,[[8,[a.a,C]],[3,u.m],u.D]),u.Mb(4608,r.l,r.k,[u.z,[2,r.z]]),u.Mb(4608,M.o,M.o,[]),u.Mb(4608,i.c,i.c,[u.F,u.g]),u.Mb(4608,i.Kb,i.Kb,[i.c,u.m,u.w]),u.Mb(4608,i.Nb,i.Nb,[i.c,u.m,u.w]),u.Mb(1073742336,r.b,r.b,[]),u.Mb(1073742336,M.n,M.n,[]),u.Mb(1073742336,M.d,M.d,[]),u.Mb(1073742336,i.Gb,i.Gb,[]),u.Mb(1073742336,b.p,b.p,[[2,b.u],[2,b.n]]),u.Mb(1073742336,s,s,[]),u.Mb(1024,b.l,(function(){return[[{path:"",component:o}]]}),[])])}))}}]);