function _classCallCheck(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(n,e){for(var l=0;l<e.length;l++){var t=e[l];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(n,t.key,t)}}function _createClass(n,e,l){return e&&_defineProperties(n.prototype,e),l&&_defineProperties(n,l),n}(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{dVBn:function(n,e,l){"use strict";l.r(e);var t=l("8Y7J"),i=l("ZZ/e"),o=l("yTNM"),s=l("EVdn"),a=function(){function n(e,l,t,i,o){_classCallCheck(this,n),this.api=e,this.router=l,this.changeRef=t,this.events=i,this.alertCtrl=o,this.user={},this.texts={a_conversation_with:"",title:"",photo:""},this.messages=[],this.notReadMessage=[],this.page=1,this.showUl=!1,this.cantWrite=!1,this.contactWasChecked=!1}return _createClass(n,[{key:"ngOnInit",value:function(){this.api.back=!1,this.user=this.api.data.user,this.getMessages(),this.checkIfCanWrite(),this.myPeer="polyApp"+this.api.userId+"_"+this.user.id,this.peerToUser="poly"+this.user.id+"_"+this.api.userId,this.peerToUserApp="polyApp"+this.user.id+"_"+this.api.userId;var n=this;setTimeout((function(){n.peerInit()}),1e3)}},{key:"getMessages",value:function(){var n=this;console.log(this.user.id),this.api.http.get(this.api.apiUrl+"/dialogs/"+this.user.id+"?per_page=30&page="+this.page,this.api.setHeaders(!0)).subscribe((function(e){s(".footerMenu").hide(),n.user=e.dialog.contact,n.user.contactImage=e.contactImage,n.texts=e.texts,n.messages=e.history,n.allowedToReadMessage=!0,n.quickMessages=e.quickMessages;for(var l=0;l<n.messages.length;l++)0==n.messages[l].isRead&&n.notReadMessage.push(n.messages[l].id);n.scrollToBottom(500,0),n.addMoreMessages=!(n.messages.length<30)}),(function(n){console.log("Oops!")}))}},{key:"scrollToBottom",value:function(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:300,l=this;setTimeout((function(){l.content.scrollToBottom(e),s(".messages").scrollTop(99999)}),n)}},{key:"peerInit",value:function(){this.api.peerjs[this.myPeer]||(console.log("PEERJS"),console.log(this.api.peerjs),this.api.peerjs[this.myPeer]=new Peer(this.myPeer,{host:"peerjs.wee.co.il",port:9e3,secure:!0,path:"/peerjs"})),this.waitPeer();var n=this;setTimeout((function(){n.start()}),500)}},{key:"waitPeer",value:function(){var n=this;"object"==typeof this.api.peerjs[this.myPeer]&&(void 0===this.api.peerjs[this.myPeer].on?(this.api.peerjs[this.myPeer]=new Peer(this.myPeer,{host:"peerjs.wee.co.il",port:9e3,path:"/peerjs",secure:!0}),this.waitPeer(),this.start()):(this.api.peerjs[this.myPeer].on("open",(function(n){console.log("data: "+n)})),this.api.peerjs[this.myPeer].on("connection",(function(e){e.peer==n.peerToUser?n.peerConnection=e:e.peer==n.peerToUserApp&&(n.peerConnectionApp=e),console.log(n.peerConnection),console.log(n.peerConnectionApp);var l=!0,t=!1,i=void 0;try{for(var o,s=n.messages[Symbol.iterator]();!(l=(o=s.next()).done);l=!0){o.value.isRead=!0}}catch(a){t=!0,i=a}finally{try{l||null==s.return||s.return()}finally{if(t)throw i}}n.peerConnection.on("data",(function(e){console.log("Received",e),n.peerMessage(e)})),n.peerConnectionApp.on("data",(function(e){console.log("Received",e),n.peerMessage(e)}))})),this.api.peerjs[this.myPeer].on("error",(function(e){console.log(e.type),console.log(e),"disconnected"==e.type&&(console.log(n.api.peerjs),console.log("will reconnect now"),n.peerInit(),n.api.peerjs[n.myPeer].reconnect())})),this.api.peerjs[this.myPeer].on("disconnected",(function(e){console.log("diconnect"),n.peerConnection=null}))))}},{key:"start",value:function(){var n=this;console.log(this.peerConnection),console.log(this.peerConnectionApp),this.peerConnection=this.api.peerjs[this.myPeer].connect(this.peerToUser),this.peerConnection.on("data",(function(e){console.log('Received from "start"2',e),n.peerMessage(e)})),this.peerConnectionApp=this.api.peerjs[this.myPeer].connect(this.peerToUserApp),this.peerConnectionApp.on("data",(function(e){console.log('Received from "start1"',e),n.peerMessage(e)})),this.peerConnectionApp.on("disconnected",(function(n){console.log("on disconnected"),console.log(n)}))}},{key:"onOpenKeyboard",value:function(){this.cantWrite?this.showCantWriteAlert():this.scrollToBottom(100)}},{key:"onCloseKeyboard",value:function(){}},{key:"back",value:function(){s(".footerMenu").show(),setTimeout((function(){s(".scroll-content, .fixed-content").css({"margin-bottom":"57px"})}),500),this.api.onBack(!0)}},{key:"sendPush",value:function(){this.api.http.post(this.api.apiUrl+"/sends/"+this.user.id+"/pushes",{},this.api.setHeaders(!0)).subscribe((function(n){}))}},{key:"ulToggle",value:function(){this.cantWrite?this.showCantWriteAlert():(this.showUl=!this.showUl,this.showUl?this.checkIfCanWrite():this.checkedQm=0)}},{key:"sendQuickMessage",value:function(){this.checkedQm>0&&(this.sendMessage(this.checkedQm),this.checkedQm=0,this.showUl=!1)}},{key:"sendMessage",value:function(){var n=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(this.message||e>0){var l={message:this.message};e>0&&(l.quickMessage=e),this.messData={message:{username:this.api.username,text:this.message,delivered:!1,messPoss:this.messages.length?this.messages.length:0}},this.messages.push(this.messData.message),this.message="",this.api.http.post(this.api.apiUrl+"/sends/"+this.user.id+"/messages",l,this.api.setHeaders(!0)).subscribe((function(e){e.message?(e.message.action="new",e.message.delivered=!0,n.messages[n.messData.message.messPoss]=e.message,n.allowedToReadMessage=!0,n.notReadMessage.push(e.message.id),n.scrollToBottom(150),n.helperSend(JSON.stringify(e.message)),n.sendPush()):(n.api.toastCreate(e.errorMessage),n.messages.splice(n.messData.message.messPoss,1))}))}}},{key:"moreMessages",value:function(n){var e=this;this.addMoreMessages&&(this.page++,this.api.http.get(this.api.apiUrl+"/dialogs/"+this.user.id+"?per_page=30&page="+this.page,this.api.setHeaders(!0)).subscribe((function(n){var l=!0,t=!1,i=void 0;try{for(var o,s=n.history[Symbol.iterator]();!(l=(o=s.next()).done);l=!0){var a=o.value;e.messages.unshift(a)}}catch(u){t=!0,i=u}finally{try{l||null==s.return||s.return()}finally{if(t)throw i}}e.addMoreMessages=!(n.history.length<30)}))),n.target.complete()}},{key:"setMessageAsRead",value:function(n){this.api.http.post(this.api.apiUrl+"/reads/"+this.user.id+"/messages",{messages_id:n},this.api.setHeaders(!0)).subscribe((function(n){}))}},{key:"deleteMessage",value:function(n,e){var l=this;this.api.storage.get("user_data").then((function(t){t&&(l.deleteMyMess=n.from==t.user_id),l.api.http.post(l.api.apiUrl+"/deletes/messages.json",{messageId:n.id,deleteFrom:l.deleteMyMess,userId:t.user_id,contactId:l.user.id},l.api.header).subscribe((function(n){n?(l.messages.splice(e,1),l.api.hideLoad()):l.api.hideLoad()}))}))}},{key:"readMessagesStatus",value:function(){var n=this;if(this.notReadMessage.length>0){var e=JSON.stringify({messages:this.notReadMessage});this.api.http.post(this.api.apiUrl+"/checks/messages",e,this.api.setHeaders(!0)).subscribe((function(e){for(var l=0;l<n.messages.length;l++)"-1"!==e.readMessages.indexOf(n.messages[l].id)&&(n.messages[l].isRead=1);for(var t=0;n.notReadMessage.length;t++)"-1"!==e.readMessages.indexOf(n.notReadMessage[t])&&delete n.notReadMessage[t]}))}}},{key:"subscription",value:function(){this.router.navigate(["/subscription"])}},{key:"ionViewWillLeave",value:function(){clearInterval(this.checkChat),this.api.peerjs[this.myPeer].disconnect(),s(".footerMenu").show(),s(document).off()}},{key:"toProfilePage",value:function(){var n={queryParams:{data:JSON.stringify({user:this.user})}};this.router.navigate(["/profile"],n)}},{key:"ionViewWillEnter",value:function(){var n=this;s(document).one("backbutton",(function(){n.api.onBack(!0)})),this.api.pageName="DialogPage",s(".footerMenu").hide(),this.scrollToBottom(400),s("button").click((function(){s("textarea").val("")}))}},{key:"peerMessage",value:function(n){var e=JSON.parse(n);if("new"===e.action)for(var l=!0,t=this.messages.length-1;t>0;t--){if(this.messages[t].id===e.id){l=!1;break}l&&(this.messages.push(e),this.scrollToBottom(300),this.setMessageAsRead(e.id),e.action="read",this.helperSend(JSON.stringify(e)))}else for(var i=this.messages.length,o=1;o<i;o++)if(this.messages[o].id==e.id){this.messages[o].isRead=!0;break}}},{key:"helperSend",value:function(n){"object"==typeof this.peerConnection?(console.log(this.peerConnection),console.log("send message in @helper send@ from peerConnection"),this.peerConnection.send(n)):(this.start(),this.helperSend(n)),"object"==typeof this.peerConnectionApp&&this.peerConnectionApp.send&&void 0!==this.peerConnectionApp.send?(console.log("send message in @helper send@ from peerConnectionApp"),this.peerConnectionApp.send(n)):(this.start(),this.helperSend(n))}},{key:"useFreePointToReadMessage",value:function(n){var e=this,l=this.api.functiontofindIndexByKeyValue(this.messages,"id",n.id);this.api.http.get(this.api.apiUrl+"/chats/"+n.id+"/use/free/point/to/read/message.json",this.api.setHeaders(!0)).subscribe((function(n){if(e.messages[l].text=n.messageText,!n.userHasFreePoints)for(var t=0;t<e.messages.length;t++)e.messages[t].hasPoints=0}))}},{key:"checkIfCanWrite",value:function(){var n=this;this.contactWasChecked||(this.api.http.get(this.api.apiUrl+"/writes/"+this.user.id,this.api.header).subscribe((function(e){e.canContact||(n.cantWrite=!0,n.cantWriteMessage=e.message,n.showCantWriteAlert())})),this.contactWasChecked=!0)}},{key:"showCantWriteAlert",value:function(){this.alertCtrl.create({header:this.cantWriteMessage.messageHeader,message:this.cantWriteMessage.messageText,backdropDismiss:!1,buttons:[{text:this.cantWriteMessage.btns.ok}]}).then((function(n){return n.present()}))}},{key:"ionViewDidLoad",value:function(){}}]),n}(),u=function n(){_classCallCheck(this,n)},r=l("pMnS"),c=l("oBZk"),p=l("SVse"),g=l("s7LF"),h=l("iInd"),d=t.Ab({encapsulation:0,styles:[[".text-input-md[_ngcontent-%COMP%]{margin:2px 0 0 10px}.usr_msg[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]{padding:0}.date[_ngcontent-%COMP%]{text-align:center;font-size:10px;color:#666;top:-7px;left:-39px}.other-msg[_ngcontent-%COMP%]{float:left;background-color:#fff}.toolbar-ios[_ngcontent-%COMP%]{background-color:#d3d3d3}.footer[_ngcontent-%COMP%]   .toolbar-content-ios[_ngcontent-%COMP%]{margin-top:7px;margin-bottom:12px;height:auto}ion-textarea[_ngcontent-%COMP%]{width:74%;height:80px;float:left;background-color:#fff;border-radius:5px;margin:3px 7px;padding:0 5px}.send-msg[_ngcontent-%COMP%]{position:absolute;bottom:0;right:7.5px;height:44px}.date-col[_ngcontent-%COMP%]{position:absolute;top:4px;right:49px}.item-ios[_ngcontent-%COMP%], .item-md[_ngcontent-%COMP%]{background-color:#fff}ion-footer[_ngcontent-%COMP%]   .toolbar-background-ios[_ngcontent-%COMP%], ion-footer[_ngcontent-%COMP%]   .toolbar-background-md[_ngcontent-%COMP%]{background-color:#ecedf3}ion-footer[_ngcontent-%COMP%]   .toolbar-background-ios[_ngcontent-%COMP%]{height:0;margin-top:auto}ion-avatar[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{width:40px;height:40px;background-size:cover;border-radius:50%}.dialog-avatar[_ngcontent-%COMP%]{margin:5px;line-height:40px;background:left center/40px auto no-repeat;text-align:center;width:100%}.messages[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]:not(.other-msg){background-color:#f5f2f2;float:right;border-radius:0;box-shadow:0 2px 6px -2px}ion-toolbar[_ngcontent-%COMP%]{padding:0;margin:0;height:45px;z-index:1000}.qmbtn[_ngcontent-%COMP%]{float:left;margin-left:8px}.messages[_ngcontent-%COMP%]{margin:0 auto;width:84%;height:calc(100% - 231px);overflow:auto}.item-ios[_ngcontent-%COMP%]   ion-avatar[item-left][_ngcontent-%COMP%], .item-ios[_ngcontent-%COMP%]   ion-thumbnail[item-left][_ngcontent-%COMP%], .item-md[_ngcontent-%COMP%]   ion-avatar[item-left][_ngcontent-%COMP%], .item-md[_ngcontent-%COMP%]   ion-thumbnail[item-left][_ngcontent-%COMP%]{margin:8px 13px}.v-ios-icon[_ngcontent-%COMP%]{font-size:1.8rem;position:absolute;bottom:0;left:27px}.trash-icon[_ngcontent-%COMP%]{position:absolute;left:7px;bottom:4px}ion-cart[_ngcontent-%COMP%]{border-radius:0;width:85%}.msg-item[_ngcontent-%COMP%]{width:90%;border-radius:0;padding:0 4px 0 17px;margin:1px 0 18px}.back-btn[_ngcontent-%COMP%]{top:114px}#form-dialog[_ngcontent-%COMP%]{--background:#ccc;position:fixed;bottom:0;height:135px}scroll-content[_ngcontent-%COMP%]{position:relative}.linkPay[_ngcontent-%COMP%]{color:#8acd16;text-decoration:none;border:none;-webkit-transition:.2s;transition:ease .2s}ion-content[_ngcontent-%COMP%]{display:-webkit-box;display:flex}.quickMessOpt[_ngcontent-%COMP%]{position:absolute;right:0;left:0;bottom:126px;width:80%;background:#ccc;margin:0 auto;padding:7px 13px 10px;border-radius:9px 9px 0 0;direction:rtl}.quickMessOpt[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{list-style:none;padding:4px;border-radius:3px;display:inline-block}.sendQuickMessage[_ngcontent-%COMP%]{margin-right:auto;display:block;width:20%}.checked[_ngcontent-%COMP%]{background:#a7a7a9fa}@media screen and (max-width:320px){.ios[_ngcontent-%COMP%]   .date[_ngcontent-%COMP%]{text-align:center;font-size:10px;color:#666;top:-6px;left:-26px}}.ios[_ngcontent-%COMP%]   .v-ios-icon[_ngcontent-%COMP%]{font-size:1.8rem;position:absolute;bottom:-3px;left:18px}"]],data:{}});function b(n){return t.Wb(0,[(n()(),t.Cb(0,0,null,null,1,"ion-card-content",[["class","mtext"],["item-left",""]],[[8,"innerHTML",1]],null,null,c.N,c.e)),t.Bb(1,49152,null,0,i.p,[t.j,t.p,t.F],null,null)],null,(function(n,e){n(e,0,0,null==e.parent.context.$implicit?null:e.parent.context.$implicit.text)}))}function m(n){return t.Wb(0,[(n()(),t.Cb(0,0,null,null,4,"ion-card-content",[["item-left",""]],null,null,null,c.N,c.e)),t.Bb(1,49152,null,0,i.p,[t.j,t.p,t.F],null,null),(n()(),t.Ub(2,0,[" "," "])),(n()(),t.Cb(3,0,null,0,1,"span",[["class","linkPay"],["color","blue"]],null,[[null,"click"]],(function(n,e,l){var t=!0;return"click"===e&&(t=!1!==n.component.subscription()&&t),t}),null,null)),(n()(),t.Ub(4,null,["",""]))],null,(function(n,e){n(e,2,0,null==e.parent.context.$implicit?null:e.parent.context.$implicit.paymentText),n(e,4,0,null==e.parent.context.$implicit?null:e.parent.context.$implicit.payLinkText)}))}function f(n){return t.Wb(0,[(n()(),t.Cb(0,0,null,null,7,"ion-card-content",[["item-left",""]],null,null,null,c.N,c.e)),t.Bb(1,49152,null,0,i.p,[t.j,t.p,t.F],null,null),(n()(),t.Ub(2,0,[" "," "])),(n()(),t.Cb(3,0,null,0,1,"span",[["class","linkPay"],["color","blue"]],null,[[null,"click"]],(function(n,e,l){var t=!0;return"click"===e&&(t=!1!==n.component.subscription()&&t),t}),null,null)),(n()(),t.Ub(4,null,["",""])),(n()(),t.Ub(-1,0,[" \u05d0\u05d5 "])),(n()(),t.Cb(6,0,null,0,1,"span",[["class","linkPay"],["color","blue"]],null,[[null,"click"]],(function(n,e,l){var t=!0;return"click"===e&&(t=!1!==n.component.useFreePointToReadMessage(n.parent.context.$implicit)&&t),t}),null,null)),(n()(),t.Ub(7,null,["",""]))],null,(function(n,e){n(e,2,0,null==e.parent.context.$implicit?null:e.parent.context.$implicit.paymentText),n(e,4,0,null==e.parent.context.$implicit?null:e.parent.context.$implicit.payLinkText),n(e,7,0,null==e.parent.context.$implicit?null:e.parent.context.$implicit.pointsText)}))}function C(n){return t.Wb(0,[(n()(),t.Cb(0,0,null,null,1,"ion-icon",[["class","v-ios-icon"],["name","done-all"]],null,null,null,c.X,c.n)),t.Bb(1,49152,null,0,i.E,[t.j,t.p,t.F],{name:[0,"name"]},null)],(function(n,e){n(e,1,0,"done-all")}),null)}function x(n){return t.Wb(0,[(n()(),t.Cb(0,0,null,null,1,"ion-icon",[["class","v-ios-icon"],["name","checkmark"]],null,null,null,c.X,c.n)),t.Bb(1,49152,null,0,i.E,[t.j,t.p,t.F],{name:[0,"name"]},null)],(function(n,e){n(e,1,0,"checkmark")}),null)}function M(n){return t.Wb(0,[(n()(),t.Cb(0,0,null,null,1,"ion-icon",[["class","v-ios-icon"],["color","primary"],["name","done-all"]],null,null,null,c.X,c.n)),t.Bb(1,49152,null,0,i.E,[t.j,t.p,t.F],{color:[0,"color"],name:[1,"name"]},null)],(function(n,e){n(e,1,0,"primary","done-all")}),null)}function v(n){return t.Wb(0,[(n()(),t.Cb(0,0,null,null,29,"ion-card",[["class","usr_msg msg-item"]],null,null,null,c.P,c.d)),t.Rb(512,null,p.u,p.v,[t.x,t.y,t.p,t.K]),t.Bb(2,278528,null,0,p.h,[p.u],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),t.Qb(3,{"other-msg":0}),t.Bb(4,49152,null,0,i.o,[t.j,t.p,t.F],null,null),(n()(),t.Cb(5,0,null,0,16,"ion-grid",[],null,null,null,c.V,c.l)),t.Bb(6,49152,null,0,i.C,[t.j,t.p,t.F],null,null),(n()(),t.Cb(7,0,null,0,14,"ion-row",[],null,null,null,c.hb,c.x)),t.Bb(8,49152,null,0,i.lb,[t.j,t.p,t.F],null,null),(n()(),t.Cb(9,0,null,0,7,"ion-col",[["width-57",""]],null,null,null,c.R,c.h)),t.Bb(10,49152,null,0,i.v,[t.j,t.p,t.F],null,null),(n()(),t.rb(16777216,null,0,1,null,b)),t.Bb(12,16384,null,0,p.j,[t.W,t.S],{ngIf:[0,"ngIf"]},null),(n()(),t.rb(16777216,null,0,1,null,m)),t.Bb(14,16384,null,0,p.j,[t.W,t.S],{ngIf:[0,"ngIf"]},null),(n()(),t.rb(16777216,null,0,1,null,f)),t.Bb(16,16384,null,0,p.j,[t.W,t.S],{ngIf:[0,"ngIf"]},null),(n()(),t.Cb(17,0,null,0,4,"ion-col",[["class","date-col"]],null,null,null,c.R,c.h)),t.Bb(18,49152,null,0,i.v,[t.j,t.p,t.F],null,null),(n()(),t.Cb(19,0,null,0,2,"ion-card-content",[["class","date"],["item-right",""]],null,null,null,c.N,c.e)),t.Bb(20,49152,null,0,i.p,[t.j,t.p,t.F],null,null),(n()(),t.Ub(21,0,[" "," "])),(n()(),t.rb(16777216,null,0,1,null,C)),t.Bb(23,16384,null,0,p.j,[t.W,t.S],{ngIf:[0,"ngIf"]},null),(n()(),t.rb(16777216,null,0,1,null,x)),t.Bb(25,16384,null,0,p.j,[t.W,t.S],{ngIf:[0,"ngIf"]},null),(n()(),t.rb(16777216,null,0,1,null,M)),t.Bb(27,16384,null,0,p.j,[t.W,t.S],{ngIf:[0,"ngIf"]},null),(n()(),t.Cb(28,0,null,0,1,"ion-icon",[["class","trash-icon"],["name","trash"]],null,[[null,"click"]],(function(n,e,l){var t=!0;return"click"===e&&(t=!1!==n.component.deleteMessage(n.context.$implicit,n.context.index)&&t),t}),c.X,c.n)),t.Bb(29,49152,null,0,i.E,[t.j,t.p,t.F],{name:[0,"name"]},null)],(function(n,e){var l=e.component,t=n(e,3,0,l.user.id==(null==e.context.$implicit?null:e.context.$implicit.from));n(e,2,0,"usr_msg msg-item",t),n(e,12,0,(null==e.context.$implicit?null:e.context.$implicit.text.length)>0),n(e,14,0,0===(null==e.context.$implicit?null:e.context.$implicit.text.length)&&0==(null==e.context.$implicit?null:e.context.$implicit.hasPoints)),n(e,16,0,0===(null==e.context.$implicit?null:e.context.$implicit.text.length)&&1==(null==e.context.$implicit?null:e.context.$implicit.hasPoints)),n(e,23,0,(null==l.user?null:l.user.id)!=e.context.$implicit.from&&!e.context.$implicit.isRead&&(1==e.context.$implicit.delivered||"undefine"==e.context.$implicit.delivered)),n(e,25,0,0==e.context.$implicit.delivered),n(e,27,0,(null==l.user?null:l.user.id)!=e.context.$implicit.from&&e.context.$implicit.isRead),n(e,29,0,"trash")}),(function(n,e){n(e,21,0,e.context.$implicit.dateTime)}))}function k(n){return t.Wb(0,[(n()(),t.Cb(0,0,null,null,15,"ion-toolbar",[["id","form-dialog"]],null,null,null,c.tb,c.J)),t.Bb(1,49152,null,0,i.Eb,[t.j,t.p,t.F],null,null),(n()(),t.Cb(2,0,null,0,2,"ion-button",[["class","qmbtn"],["color","danger"]],null,[[null,"click"]],(function(n,e,l){var t=!0;return"click"===e&&(t=!1!==n.component.ulToggle()&&t),t}),c.L,c.b)),t.Bb(3,49152,null,0,i.m,[t.j,t.p,t.F],{color:[0,"color"]},null),(n()(),t.Ub(-1,0,[" \u05d4\u05d5\u05d3\u05e2\u05d4 \u05de\u05d4\u05d9\u05e8\u05d4 "])),(n()(),t.Cb(5,0,null,0,6,"ion-textarea",[["id","dialog-msg"],["placeholder",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"click"],[null,"ionBlur"],[null,"ngModelChange"],[null,"ionChange"]],(function(n,e,l){var i=!0,o=n.component;return"ionBlur"===e&&(i=!1!==t.Ob(n,6)._handleBlurEvent(l.target)&&i),"ionChange"===e&&(i=!1!==t.Ob(n,6)._handleInputEvent(l.target)&&i),"click"===e&&(i=!1!==o.onOpenKeyboard()&&i),"ionBlur"===e&&(i=!1!==o.onCloseKeyboard()&&i),"ngModelChange"===e&&(i=!1!==(o.message=l)&&i),i}),c.qb,c.G)),t.Bb(6,16384,null,0,i.Qb,[t.p],null,null),t.Rb(1024,null,g.g,(function(n){return[n]}),[i.Qb]),t.Bb(8,671744,null,0,g.l,[[8,null],[8,null],[8,null],[6,g.g]],{isDisabled:[0,"isDisabled"],model:[1,"model"]},{update:"ngModelChange"}),t.Rb(2048,null,g.h,null,[g.l]),t.Bb(10,16384,null,0,g.i,[[4,g.h]],null,null),t.Bb(11,49152,null,0,i.Ab,[t.j,t.p,t.F],{disabled:[0,"disabled"],placeholder:[1,"placeholder"]},null),(n()(),t.Cb(12,0,null,0,0,"div",[["class","clear-both"]],null,null,null,null,null)),(n()(),t.Cb(13,0,null,0,2,"ion-button",[["class","send-msg"],["color","danger"]],null,[[null,"click"]],(function(n,e,l){var t=!0;return"click"===e&&(t=!1!==n.component.sendMessage()&&t),t}),c.L,c.b)),t.Bb(14,49152,null,0,i.m,[t.j,t.p,t.F],{color:[0,"color"]},null),(n()(),t.Ub(-1,0,["\u05e9\u05dc\u05d7"]))],(function(n,e){var l=e.component;n(e,3,0,"danger"),n(e,8,0,l.cantWrite,l.message),n(e,11,0,l.cantWrite,""),n(e,14,0,"danger")}),(function(n,e){n(e,5,0,t.Ob(e,10).ngClassUntouched,t.Ob(e,10).ngClassTouched,t.Ob(e,10).ngClassPristine,t.Ob(e,10).ngClassDirty,t.Ob(e,10).ngClassValid,t.Ob(e,10).ngClassInvalid,t.Ob(e,10).ngClassPending)}))}function y(n){return t.Wb(0,[(n()(),t.Cb(0,0,null,null,4,"li",[],null,[[null,"click"]],(function(n,e,l){var t=!0;return"click"===e&&(t=!1!==(n.component.checkedQm=n.context.$implicit.id)&&t),t}),null,null)),t.Rb(512,null,p.u,p.v,[t.x,t.y,t.p,t.K]),t.Bb(2,278528,null,0,p.h,[p.u],{ngClass:[0,"ngClass"]},null),t.Qb(3,{checked:0}),(n()(),t.Ub(4,null,[" "," "]))],(function(n,e){var l=n(e,3,0,e.context.$implicit.id==e.component.checkedQm);n(e,2,0,l)}),(function(n,e){n(e,4,0,e.context.$implicit.text)}))}function P(n){return t.Wb(0,[(n()(),t.Cb(0,0,null,null,5,"div",[["class","quickMessOpt"]],null,null,null,null,null)),(n()(),t.rb(16777216,null,null,1,null,y)),t.Bb(2,278528,null,0,p.i,[t.W,t.S,t.x],{ngForOf:[0,"ngForOf"]},null),(n()(),t.Cb(3,0,null,null,2,"ion-button",[["class","sendQuickMessage"],["color","danger"]],null,[[null,"click"]],(function(n,e,l){var t=!0;return"click"===e&&(t=!1!==n.component.sendQuickMessage()&&t),t}),c.L,c.b)),t.Bb(4,49152,null,0,i.m,[t.j,t.p,t.F],{color:[0,"color"]},null),(n()(),t.Ub(-1,0,[" \u05e9\u05dc\u05d7 "]))],(function(n,e){n(e,2,0,e.component.quickMessages),n(e,4,0,"danger")}),null)}function O(n){return t.Wb(0,[t.Sb(671088640,1,{content:0}),(n()(),t.Cb(1,0,null,null,6,"ion-header",[],null,null,null,c.W,c.m)),t.Bb(2,49152,null,0,i.D,[t.j,t.p,t.F],null,null),(n()(),t.Cb(3,0,null,0,4,"ion-toolbar",[],null,null,null,c.tb,c.J)),t.Bb(4,49152,null,0,i.Eb,[t.j,t.p,t.F],null,null),(n()(),t.Cb(5,0,null,0,2,"ion-title",[],null,null,null,c.rb,c.H)),t.Bb(6,49152,null,0,i.Cb,[t.j,t.p,t.F],null,null),(n()(),t.Ub(-1,0,["dialog"])),(n()(),t.Cb(8,0,null,null,2,"div",[["class","back-btn"]],null,[[null,"click"]],(function(n,e,l){var t=!0;return"click"===e&&(t=!1!==n.component.back()&&t),t}),null,null)),(n()(),t.Cb(9,0,null,null,1,"ion-icon",[["name","ios-arrow-forward"]],null,null,null,c.X,c.n)),t.Bb(10,49152,null,0,i.E,[t.j,t.p,t.F],{name:[0,"name"]},null),(n()(),t.Cb(11,0,null,null,21,"ion-content",[["id","content"]],null,null,null,c.S,c.i)),t.Bb(12,49152,[[1,4],["content",4]],0,i.w,[t.j,t.p,t.F],{scrollEvents:[0,"scrollEvents"]},null),(n()(),t.Cb(13,0,null,0,10,"ion-card",[["class","user-block"]],null,null,null,c.P,c.d)),t.Bb(14,49152,null,0,i.o,[t.j,t.p,t.F],null,null),(n()(),t.Cb(15,0,null,0,8,"ion-list",[["lines","none"]],null,null,null,c.db,c.t)),t.Bb(16,49152,null,0,i.Q,[t.j,t.p,t.F],{lines:[0,"lines"]},null),(n()(),t.Cb(17,0,null,0,6,"ion-item",[],null,null,null,c.bb,c.r)),t.Bb(18,49152,null,0,i.J,[t.j,t.p,t.F],null,null),(n()(),t.Cb(19,0,null,0,4,"p",[["class","dialog-avatar"]],null,[[null,"click"]],(function(n,e,l){var t=!0;return"click"===e&&(t=!1!==n.component.toProfilePage()&&t),t}),null,null)),t.Rb(512,null,p.w,p.x,[t.p,t.y,t.K]),t.Bb(21,278528,null,0,p.m,[p.w],{ngStyle:[0,"ngStyle"]},null),t.Qb(22,{"background-image":0}),(n()(),t.Ub(23,null,[""," ",""])),(n()(),t.Cb(24,0,null,0,2,"div",[["class","messages"]],null,null,null,null,null)),(n()(),t.rb(16777216,null,null,1,null,v)),t.Bb(26,278528,null,0,p.i,[t.W,t.S,t.x],{ngForOf:[0,"ngForOf"]},null),(n()(),t.rb(16777216,null,0,1,null,k)),t.Bb(28,16384,null,0,p.j,[t.W,t.S],{ngIf:[0,"ngIf"]},null),(n()(),t.Cb(29,0,null,0,3,"ion-infinite-scroll",[["position","top"],["threshold","60%"]],null,[[null,"ionInfinite"]],(function(n,e,l){var t=!0;return"ionInfinite"===e&&(t=!1!==n.component.moreMessages(l)&&t),t}),c.Z,c.o)),t.Bb(30,49152,[["scroll",4]],0,i.G,[t.j,t.p,t.F],{position:[0,"position"],threshold:[1,"threshold"]},null),(n()(),t.Cb(31,0,null,0,1,"ion-infinite-scroll-content",[],null,null,null,c.Y,c.p)),t.Bb(32,49152,null,0,i.H,[t.j,t.p,t.F],null,null),(n()(),t.rb(16777216,null,null,1,null,P)),t.Bb(34,16384,null,0,p.j,[t.W,t.S],{ngIf:[0,"ngIf"]},null)],(function(n,e){var l=e.component;n(e,10,0,"ios-arrow-forward"),n(e,12,0,!0),n(e,16,0,"none");var t=n(e,22,0,"url("+l.api.url+l.user.contactImage+")");n(e,21,0,t),n(e,26,0,l.messages),n(e,28,0,l.messages),n(e,30,0,"top","60%"),n(e,34,0,l.showUl)}),(function(n,e){var l=e.component;n(e,23,0,l.texts.a_conversation_with,l.texts.name)}))}var _=t.yb("page-dialog",a,(function(n){return t.Wb(0,[(n()(),t.Cb(0,0,null,null,1,"page-dialog",[],null,null,null,O,d)),t.Bb(1,114688,null,0,a,[o.a,h.n,t.j,i.g,i.b],null,null)],(function(n,e){n(e,1,0)}),null)}),{},{},[]);l.d(e,"DialogPageModuleNgFactory",(function(){return w}));var w=t.zb(u,[],(function(n){return t.Lb([t.Mb(512,t.m,t.jb,[[8,[r.a,_]],[3,t.m],t.D]),t.Mb(4608,p.l,p.k,[t.z,[2,p.z]]),t.Mb(4608,g.o,g.o,[]),t.Mb(4608,i.c,i.c,[t.F,t.g]),t.Mb(4608,i.Kb,i.Kb,[i.c,t.m,t.w]),t.Mb(4608,i.Nb,i.Nb,[i.c,t.m,t.w]),t.Mb(1073742336,p.b,p.b,[]),t.Mb(1073742336,g.n,g.n,[]),t.Mb(1073742336,g.d,g.d,[]),t.Mb(1073742336,i.Gb,i.Gb,[]),t.Mb(1073742336,h.p,h.p,[[2,h.u],[2,h.n]]),t.Mb(1073742336,u,u,[]),t.Mb(1024,h.l,(function(){return[[{path:"",component:a}]]}),[])])}))}}]);