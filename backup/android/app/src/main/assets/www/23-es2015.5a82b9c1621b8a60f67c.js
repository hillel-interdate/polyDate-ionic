(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{dVBn:function(n,e,t){"use strict";t.r(e);var l=t("8Y7J"),s=t("ZZ/e"),i=t("yTNM"),o=t("EVdn");class a{constructor(n,e,t,l,s){this.api=n,this.router=e,this.changeRef=t,this.events=l,this.alertCtrl=s,this.user={},this.texts={a_conversation_with:"",title:"",photo:""},this.messages=[],this.notReadMessage=[],this.page=1,this.showUl=!1,this.cantWrite=!1,this.contactWasChecked=!1}ngOnInit(){this.api.back=!1,this.user=this.api.data.user,this.getMessages(),this.checkIfCanWrite(),this.myPeer="polyApp"+this.api.userId+"_"+this.user.id,this.peerToUser="poly"+this.user.id+"_"+this.api.userId,this.peerToUserApp="polyApp"+this.user.id+"_"+this.api.userId;const n=this;setTimeout(()=>{n.peerInit()},1e3)}getMessages(){console.log(this.user.id),this.api.http.get(this.api.apiUrl+"/dialogs/"+this.user.id+"?per_page=30&page="+this.page,this.api.setHeaders(!0)).subscribe(n=>{o(".footerMenu").hide(),this.user=n.dialog.contact,this.user.contactImage=n.contactImage,this.texts=n.texts,this.messages=n.history,this.allowedToReadMessage=!0,this.quickMessages=n.quickMessages;for(let e=0;e<this.messages.length;e++)0==this.messages[e].isRead&&this.notReadMessage.push(this.messages[e].id);this.scrollToBottom(500,0),this.addMoreMessages=!(this.messages.length<30)},n=>{console.log("Oops!")})}scrollToBottom(n,e=300){const t=this;setTimeout(()=>{t.content.scrollToBottom(e),o(".messages").scrollTop(99999)},n)}peerInit(){this.api.peerjs[this.myPeer]||(console.log("PEERJS"),console.log(this.api.peerjs),this.api.peerjs[this.myPeer]=new Peer(this.myPeer,{host:"peerjs.wee.co.il",port:9e3,secure:!0,path:"/peerjs"})),this.waitPeer();let n=this;setTimeout(()=>{n.start()},500)}waitPeer(){"object"==typeof this.api.peerjs[this.myPeer]&&(void 0===this.api.peerjs[this.myPeer].on?(this.api.peerjs[this.myPeer]=new Peer(this.myPeer,{host:"peerjs.wee.co.il",port:9e3,path:"/peerjs",secure:!0}),this.waitPeer(),this.start()):(this.api.peerjs[this.myPeer].on("open",n=>{console.log("data: "+n)}),this.api.peerjs[this.myPeer].on("connection",n=>{n.peer==this.peerToUser?this.peerConnection=n:n.peer==this.peerToUserApp&&(this.peerConnectionApp=n),console.log(this.peerConnection),console.log(this.peerConnectionApp);for(const e of this.messages)e.isRead=!0;this.peerConnection.on("data",n=>{console.log("Received",n),this.peerMessage(n)}),this.peerConnectionApp.on("data",n=>{console.log("Received",n),this.peerMessage(n)})}),this.api.peerjs[this.myPeer].on("error",n=>{console.log(n.type),console.log(n),"disconnected"==n.type&&(console.log(this.api.peerjs),console.log("will reconnect now"),this.peerInit(),this.api.peerjs[this.myPeer].reconnect())}),this.api.peerjs[this.myPeer].on("disconnected",n=>{console.log("diconnect"),this.peerConnection=null})))}start(){console.log(this.peerConnection),console.log(this.peerConnectionApp),this.peerConnection=this.api.peerjs[this.myPeer].connect(this.peerToUser),this.peerConnection.on("data",n=>{console.log('Received from "start"2',n),this.peerMessage(n)}),this.peerConnectionApp=this.api.peerjs[this.myPeer].connect(this.peerToUserApp),this.peerConnectionApp.on("data",n=>{console.log('Received from "start1"',n),this.peerMessage(n)}),this.peerConnectionApp.on("disconnected",n=>{console.log("on disconnected"),console.log(n)})}onOpenKeyboard(){this.cantWrite?this.showCantWriteAlert():this.scrollToBottom(100)}onCloseKeyboard(){}back(){o(".footerMenu").show(),setTimeout(()=>{o(".scroll-content, .fixed-content").css({"margin-bottom":"57px"})},500),this.api.onBack(!0)}sendPush(){this.api.http.post(this.api.apiUrl+"/sends/"+this.user.id+"/pushes",{},this.api.setHeaders(!0)).subscribe(n=>{})}ulToggle(){this.cantWrite?this.showCantWriteAlert():(this.showUl=!this.showUl,this.showUl?this.checkIfCanWrite():this.checkedQm=0)}sendQuickMessage(){this.checkedQm>0&&(this.sendMessage(this.checkedQm),this.checkedQm=0,this.showUl=!1)}sendMessage(n=0){if(this.message||n>0){const e={message:this.message};n>0&&(e.quickMessage=n),this.messData={message:{username:this.api.username,text:this.message,delivered:!1,messPoss:this.messages.length?this.messages.length:0}},this.messages.push(this.messData.message),this.message="",this.api.http.post(this.api.apiUrl+"/sends/"+this.user.id+"/messages",e,this.api.setHeaders(!0)).subscribe(n=>{n.message?(n.message.action="new",n.message.delivered=!0,this.messages[this.messData.message.messPoss]=n.message,this.allowedToReadMessage=!0,this.notReadMessage.push(n.message.id),this.scrollToBottom(150),this.helperSend(JSON.stringify(n.message)),this.sendPush()):(this.api.toastCreate(n.errorMessage),this.messages.splice(this.messData.message.messPoss,1))})}}moreMessages(n){this.addMoreMessages&&(this.page++,this.api.http.get(this.api.apiUrl+"/dialogs/"+this.user.id+"?per_page=30&page="+this.page,this.api.setHeaders(!0)).subscribe(n=>{for(const e of n.history)this.messages.unshift(e);this.addMoreMessages=!(n.history.length<30)})),n.target.complete()}setMessageAsRead(n){this.api.http.post(this.api.apiUrl+"/reads/"+this.user.id+"/messages",{messages_id:n},this.api.setHeaders(!0)).subscribe(n=>{})}deleteMessage(n,e){this.api.storage.get("user_data").then(t=>{t&&(this.deleteMyMess=n.from==t.user_id),this.api.http.post(this.api.apiUrl+"/deletes/messages.json",{messageId:n.id,deleteFrom:this.deleteMyMess,userId:t.user_id,contactId:this.user.id},this.api.header).subscribe(n=>{n?(this.messages.splice(e,1),this.api.hideLoad()):this.api.hideLoad()})})}readMessagesStatus(){if(this.notReadMessage.length>0){const n=JSON.stringify({messages:this.notReadMessage});this.api.http.post(this.api.apiUrl+"/checks/messages",n,this.api.setHeaders(!0)).subscribe(n=>{for(let e=0;e<this.messages.length;e++)"-1"!==n.readMessages.indexOf(this.messages[e].id)&&(this.messages[e].isRead=1);for(let e=0;this.notReadMessage.length;e++)"-1"!==n.readMessages.indexOf(this.notReadMessage[e])&&delete this.notReadMessage[e]})}}subscription(){this.router.navigate(["/subscription"])}ionViewWillLeave(){clearInterval(this.checkChat),this.api.peerjs[this.myPeer].disconnect(),o(".footerMenu").show(),o(document).off()}toProfilePage(){const n={queryParams:{data:JSON.stringify({user:this.user})}};this.router.navigate(["/profile"],n)}ionViewWillEnter(){o(document).one("backbutton",()=>{this.api.onBack(!0)}),this.api.pageName="DialogPage",o(".footerMenu").hide(),this.scrollToBottom(400),o("button").click(()=>{o("textarea").val("")})}peerMessage(n){const e=JSON.parse(n);if("new"===e.action){let n=!0;for(let t=this.messages.length-1;t>0;t--){if(this.messages[t].id===e.id){n=!1;break}n&&(this.messages.push(e),this.scrollToBottom(300),this.setMessageAsRead(e.id),e.action="read",this.helperSend(JSON.stringify(e)))}}else{const n=this.messages.length;for(let t=1;t<n;t++)if(this.messages[t].id==e.id){this.messages[t].isRead=!0;break}}}helperSend(n){"object"==typeof this.peerConnection?(console.log(this.peerConnection),console.log("send message in @helper send@ from peerConnection"),this.peerConnection.send(n)):(this.start(),this.helperSend(n)),"object"==typeof this.peerConnectionApp&&this.peerConnectionApp.send&&void 0!==this.peerConnectionApp.send?(console.log("send message in @helper send@ from peerConnectionApp"),this.peerConnectionApp.send(n)):(this.start(),this.helperSend(n))}useFreePointToReadMessage(n){let e=this.api.functiontofindIndexByKeyValue(this.messages,"id",n.id);this.api.http.get(this.api.apiUrl+"/chats/"+n.id+"/use/free/point/to/read/message.json",this.api.setHeaders(!0)).subscribe(n=>{if(this.messages[e].text=n.messageText,!n.userHasFreePoints)for(let e=0;e<this.messages.length;e++)this.messages[e].hasPoints=0})}checkIfCanWrite(){this.contactWasChecked||(this.api.http.get(this.api.apiUrl+"/writes/"+this.user.id,this.api.header).subscribe(n=>{n.canContact||(this.cantWrite=!0,this.cantWriteMessage=n.message,this.showCantWriteAlert())}),this.contactWasChecked=!0)}showCantWriteAlert(){this.alertCtrl.create({header:this.cantWriteMessage.messageHeader,message:this.cantWriteMessage.messageText,backdropDismiss:!1,buttons:[{text:this.cantWriteMessage.btns.ok}]}).then(n=>n.present())}ionViewDidLoad(){}}class u{}var c=t("pMnS"),r=t("oBZk"),p=t("SVse"),h=t("s7LF"),g=t("iInd"),d=l.Ab({encapsulation:0,styles:[[".text-input-md[_ngcontent-%COMP%]{margin:2px 0 0 10px}.usr_msg[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]{padding:0}.date[_ngcontent-%COMP%]{text-align:center;font-size:10px;color:#666;top:-7px;left:-39px}.other-msg[_ngcontent-%COMP%]{float:left;background-color:#fff}.toolbar-ios[_ngcontent-%COMP%]{background-color:#d3d3d3}.footer[_ngcontent-%COMP%]   .toolbar-content-ios[_ngcontent-%COMP%]{margin-top:7px;margin-bottom:12px;height:auto}ion-textarea[_ngcontent-%COMP%]{width:74%;height:80px;float:left;background-color:#fff;border-radius:5px;margin:3px 7px;padding:0 5px}.send-msg[_ngcontent-%COMP%]{position:absolute;bottom:0;right:7.5px;height:44px}.date-col[_ngcontent-%COMP%]{position:absolute;top:4px;right:49px}.item-ios[_ngcontent-%COMP%], .item-md[_ngcontent-%COMP%]{background-color:#fff}ion-footer[_ngcontent-%COMP%]   .toolbar-background-ios[_ngcontent-%COMP%], ion-footer[_ngcontent-%COMP%]   .toolbar-background-md[_ngcontent-%COMP%]{background-color:#ecedf3}ion-footer[_ngcontent-%COMP%]   .toolbar-background-ios[_ngcontent-%COMP%]{height:0;margin-top:auto}ion-avatar[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{width:40px;height:40px;background-size:cover;border-radius:50%}.dialog-avatar[_ngcontent-%COMP%]{margin:5px;line-height:40px;background:left center/40px auto no-repeat;text-align:center;width:100%}.messages[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]:not(.other-msg){background-color:#f5f2f2;float:right;border-radius:0;box-shadow:0 2px 6px -2px}ion-toolbar[_ngcontent-%COMP%]{padding:0;margin:0;height:45px;z-index:1000}.qmbtn[_ngcontent-%COMP%]{float:left;margin-left:8px}.messages[_ngcontent-%COMP%]{margin:0 auto;width:84%;height:calc(100% - 231px);overflow:auto}.item-ios[_ngcontent-%COMP%]   ion-avatar[item-left][_ngcontent-%COMP%], .item-ios[_ngcontent-%COMP%]   ion-thumbnail[item-left][_ngcontent-%COMP%], .item-md[_ngcontent-%COMP%]   ion-avatar[item-left][_ngcontent-%COMP%], .item-md[_ngcontent-%COMP%]   ion-thumbnail[item-left][_ngcontent-%COMP%]{margin:8px 13px}.v-ios-icon[_ngcontent-%COMP%]{font-size:1.8rem;position:absolute;bottom:0;left:27px}.trash-icon[_ngcontent-%COMP%]{position:absolute;left:7px;bottom:4px}ion-cart[_ngcontent-%COMP%]{border-radius:0;width:85%}.msg-item[_ngcontent-%COMP%]{width:90%;border-radius:0;padding:0 4px 0 17px;margin:1px 0 18px}.back-btn[_ngcontent-%COMP%]{top:114px}#form-dialog[_ngcontent-%COMP%]{--background:#ccc;position:fixed;bottom:0;height:135px}scroll-content[_ngcontent-%COMP%]{position:relative}.linkPay[_ngcontent-%COMP%]{color:#8acd16;text-decoration:none;border:none;-webkit-transition:.2s;transition:ease .2s}ion-content[_ngcontent-%COMP%]{display:-webkit-box;display:flex}.quickMessOpt[_ngcontent-%COMP%]{position:absolute;right:0;left:0;bottom:126px;width:80%;background:#ccc;margin:0 auto;padding:7px 13px 10px;border-radius:9px 9px 0 0;direction:rtl}.quickMessOpt[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{list-style:none;padding:4px;border-radius:3px;display:inline-block}.sendQuickMessage[_ngcontent-%COMP%]{margin-right:auto;display:block;width:20%}.checked[_ngcontent-%COMP%]{background:#a7a7a9fa}@media screen and (max-width:320px){.ios[_ngcontent-%COMP%]   .date[_ngcontent-%COMP%]{text-align:center;font-size:10px;color:#666;top:-6px;left:-26px}}.ios[_ngcontent-%COMP%]   .v-ios-icon[_ngcontent-%COMP%]{font-size:1.8rem;position:absolute;bottom:-3px;left:18px}"]],data:{}});function b(n){return l.Wb(0,[(n()(),l.Cb(0,0,null,null,1,"ion-card-content",[["class","mtext"],["item-left",""]],[[8,"innerHTML",1]],null,null,r.N,r.e)),l.Bb(1,49152,null,0,s.p,[l.j,l.p,l.F],null,null)],null,(function(n,e){n(e,0,0,null==e.parent.context.$implicit?null:e.parent.context.$implicit.text)}))}function m(n){return l.Wb(0,[(n()(),l.Cb(0,0,null,null,4,"ion-card-content",[["item-left",""]],null,null,null,r.N,r.e)),l.Bb(1,49152,null,0,s.p,[l.j,l.p,l.F],null,null),(n()(),l.Ub(2,0,[" "," "])),(n()(),l.Cb(3,0,null,0,1,"span",[["class","linkPay"],["color","blue"]],null,[[null,"click"]],(function(n,e,t){var l=!0;return"click"===e&&(l=!1!==n.component.subscription()&&l),l}),null,null)),(n()(),l.Ub(4,null,["",""]))],null,(function(n,e){n(e,2,0,null==e.parent.context.$implicit?null:e.parent.context.$implicit.paymentText),n(e,4,0,null==e.parent.context.$implicit?null:e.parent.context.$implicit.payLinkText)}))}function f(n){return l.Wb(0,[(n()(),l.Cb(0,0,null,null,7,"ion-card-content",[["item-left",""]],null,null,null,r.N,r.e)),l.Bb(1,49152,null,0,s.p,[l.j,l.p,l.F],null,null),(n()(),l.Ub(2,0,[" "," "])),(n()(),l.Cb(3,0,null,0,1,"span",[["class","linkPay"],["color","blue"]],null,[[null,"click"]],(function(n,e,t){var l=!0;return"click"===e&&(l=!1!==n.component.subscription()&&l),l}),null,null)),(n()(),l.Ub(4,null,["",""])),(n()(),l.Ub(-1,0,[" \u05d0\u05d5 "])),(n()(),l.Cb(6,0,null,0,1,"span",[["class","linkPay"],["color","blue"]],null,[[null,"click"]],(function(n,e,t){var l=!0;return"click"===e&&(l=!1!==n.component.useFreePointToReadMessage(n.parent.context.$implicit)&&l),l}),null,null)),(n()(),l.Ub(7,null,["",""]))],null,(function(n,e){n(e,2,0,null==e.parent.context.$implicit?null:e.parent.context.$implicit.paymentText),n(e,4,0,null==e.parent.context.$implicit?null:e.parent.context.$implicit.payLinkText),n(e,7,0,null==e.parent.context.$implicit?null:e.parent.context.$implicit.pointsText)}))}function C(n){return l.Wb(0,[(n()(),l.Cb(0,0,null,null,1,"ion-icon",[["class","v-ios-icon"],["name","done-all"]],null,null,null,r.X,r.n)),l.Bb(1,49152,null,0,s.E,[l.j,l.p,l.F],{name:[0,"name"]},null)],(function(n,e){n(e,1,0,"done-all")}),null)}function x(n){return l.Wb(0,[(n()(),l.Cb(0,0,null,null,1,"ion-icon",[["class","v-ios-icon"],["name","checkmark"]],null,null,null,r.X,r.n)),l.Bb(1,49152,null,0,s.E,[l.j,l.p,l.F],{name:[0,"name"]},null)],(function(n,e){n(e,1,0,"checkmark")}),null)}function M(n){return l.Wb(0,[(n()(),l.Cb(0,0,null,null,1,"ion-icon",[["class","v-ios-icon"],["color","primary"],["name","done-all"]],null,null,null,r.X,r.n)),l.Bb(1,49152,null,0,s.E,[l.j,l.p,l.F],{color:[0,"color"],name:[1,"name"]},null)],(function(n,e){n(e,1,0,"primary","done-all")}),null)}function P(n){return l.Wb(0,[(n()(),l.Cb(0,0,null,null,29,"ion-card",[["class","usr_msg msg-item"]],null,null,null,r.P,r.d)),l.Rb(512,null,p.u,p.v,[l.x,l.y,l.p,l.K]),l.Bb(2,278528,null,0,p.h,[p.u],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l.Qb(3,{"other-msg":0}),l.Bb(4,49152,null,0,s.o,[l.j,l.p,l.F],null,null),(n()(),l.Cb(5,0,null,0,16,"ion-grid",[],null,null,null,r.V,r.l)),l.Bb(6,49152,null,0,s.C,[l.j,l.p,l.F],null,null),(n()(),l.Cb(7,0,null,0,14,"ion-row",[],null,null,null,r.hb,r.x)),l.Bb(8,49152,null,0,s.lb,[l.j,l.p,l.F],null,null),(n()(),l.Cb(9,0,null,0,7,"ion-col",[["width-57",""]],null,null,null,r.R,r.h)),l.Bb(10,49152,null,0,s.v,[l.j,l.p,l.F],null,null),(n()(),l.rb(16777216,null,0,1,null,b)),l.Bb(12,16384,null,0,p.j,[l.W,l.S],{ngIf:[0,"ngIf"]},null),(n()(),l.rb(16777216,null,0,1,null,m)),l.Bb(14,16384,null,0,p.j,[l.W,l.S],{ngIf:[0,"ngIf"]},null),(n()(),l.rb(16777216,null,0,1,null,f)),l.Bb(16,16384,null,0,p.j,[l.W,l.S],{ngIf:[0,"ngIf"]},null),(n()(),l.Cb(17,0,null,0,4,"ion-col",[["class","date-col"]],null,null,null,r.R,r.h)),l.Bb(18,49152,null,0,s.v,[l.j,l.p,l.F],null,null),(n()(),l.Cb(19,0,null,0,2,"ion-card-content",[["class","date"],["item-right",""]],null,null,null,r.N,r.e)),l.Bb(20,49152,null,0,s.p,[l.j,l.p,l.F],null,null),(n()(),l.Ub(21,0,[" "," "])),(n()(),l.rb(16777216,null,0,1,null,C)),l.Bb(23,16384,null,0,p.j,[l.W,l.S],{ngIf:[0,"ngIf"]},null),(n()(),l.rb(16777216,null,0,1,null,x)),l.Bb(25,16384,null,0,p.j,[l.W,l.S],{ngIf:[0,"ngIf"]},null),(n()(),l.rb(16777216,null,0,1,null,M)),l.Bb(27,16384,null,0,p.j,[l.W,l.S],{ngIf:[0,"ngIf"]},null),(n()(),l.Cb(28,0,null,0,1,"ion-icon",[["class","trash-icon"],["name","trash"]],null,[[null,"click"]],(function(n,e,t){var l=!0;return"click"===e&&(l=!1!==n.component.deleteMessage(n.context.$implicit,n.context.index)&&l),l}),r.X,r.n)),l.Bb(29,49152,null,0,s.E,[l.j,l.p,l.F],{name:[0,"name"]},null)],(function(n,e){var t=e.component,l=n(e,3,0,t.user.id==(null==e.context.$implicit?null:e.context.$implicit.from));n(e,2,0,"usr_msg msg-item",l),n(e,12,0,(null==e.context.$implicit?null:e.context.$implicit.text.length)>0),n(e,14,0,0===(null==e.context.$implicit?null:e.context.$implicit.text.length)&&0==(null==e.context.$implicit?null:e.context.$implicit.hasPoints)),n(e,16,0,0===(null==e.context.$implicit?null:e.context.$implicit.text.length)&&1==(null==e.context.$implicit?null:e.context.$implicit.hasPoints)),n(e,23,0,(null==t.user?null:t.user.id)!=e.context.$implicit.from&&!e.context.$implicit.isRead&&(1==e.context.$implicit.delivered||"undefine"==e.context.$implicit.delivered)),n(e,25,0,0==e.context.$implicit.delivered),n(e,27,0,(null==t.user?null:t.user.id)!=e.context.$implicit.from&&e.context.$implicit.isRead),n(e,29,0,"trash")}),(function(n,e){n(e,21,0,e.context.$implicit.dateTime)}))}function k(n){return l.Wb(0,[(n()(),l.Cb(0,0,null,null,15,"ion-toolbar",[["id","form-dialog"]],null,null,null,r.tb,r.J)),l.Bb(1,49152,null,0,s.Eb,[l.j,l.p,l.F],null,null),(n()(),l.Cb(2,0,null,0,2,"ion-button",[["class","qmbtn"],["color","danger"]],null,[[null,"click"]],(function(n,e,t){var l=!0;return"click"===e&&(l=!1!==n.component.ulToggle()&&l),l}),r.L,r.b)),l.Bb(3,49152,null,0,s.m,[l.j,l.p,l.F],{color:[0,"color"]},null),(n()(),l.Ub(-1,0,[" \u05d4\u05d5\u05d3\u05e2\u05d4 \u05de\u05d4\u05d9\u05e8\u05d4 "])),(n()(),l.Cb(5,0,null,0,6,"ion-textarea",[["id","dialog-msg"],["placeholder",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"click"],[null,"ionBlur"],[null,"ngModelChange"],[null,"ionChange"]],(function(n,e,t){var s=!0,i=n.component;return"ionBlur"===e&&(s=!1!==l.Ob(n,6)._handleBlurEvent(t.target)&&s),"ionChange"===e&&(s=!1!==l.Ob(n,6)._handleInputEvent(t.target)&&s),"click"===e&&(s=!1!==i.onOpenKeyboard()&&s),"ionBlur"===e&&(s=!1!==i.onCloseKeyboard()&&s),"ngModelChange"===e&&(s=!1!==(i.message=t)&&s),s}),r.qb,r.G)),l.Bb(6,16384,null,0,s.Qb,[l.p],null,null),l.Rb(1024,null,h.g,(function(n){return[n]}),[s.Qb]),l.Bb(8,671744,null,0,h.l,[[8,null],[8,null],[8,null],[6,h.g]],{isDisabled:[0,"isDisabled"],model:[1,"model"]},{update:"ngModelChange"}),l.Rb(2048,null,h.h,null,[h.l]),l.Bb(10,16384,null,0,h.i,[[4,h.h]],null,null),l.Bb(11,49152,null,0,s.Ab,[l.j,l.p,l.F],{disabled:[0,"disabled"],placeholder:[1,"placeholder"]},null),(n()(),l.Cb(12,0,null,0,0,"div",[["class","clear-both"]],null,null,null,null,null)),(n()(),l.Cb(13,0,null,0,2,"ion-button",[["class","send-msg"],["color","danger"]],null,[[null,"click"]],(function(n,e,t){var l=!0;return"click"===e&&(l=!1!==n.component.sendMessage()&&l),l}),r.L,r.b)),l.Bb(14,49152,null,0,s.m,[l.j,l.p,l.F],{color:[0,"color"]},null),(n()(),l.Ub(-1,0,["\u05e9\u05dc\u05d7"]))],(function(n,e){var t=e.component;n(e,3,0,"danger"),n(e,8,0,t.cantWrite,t.message),n(e,11,0,t.cantWrite,""),n(e,14,0,"danger")}),(function(n,e){n(e,5,0,l.Ob(e,10).ngClassUntouched,l.Ob(e,10).ngClassTouched,l.Ob(e,10).ngClassPristine,l.Ob(e,10).ngClassDirty,l.Ob(e,10).ngClassValid,l.Ob(e,10).ngClassInvalid,l.Ob(e,10).ngClassPending)}))}function O(n){return l.Wb(0,[(n()(),l.Cb(0,0,null,null,4,"li",[],null,[[null,"click"]],(function(n,e,t){var l=!0;return"click"===e&&(l=!1!==(n.component.checkedQm=n.context.$implicit.id)&&l),l}),null,null)),l.Rb(512,null,p.u,p.v,[l.x,l.y,l.p,l.K]),l.Bb(2,278528,null,0,p.h,[p.u],{ngClass:[0,"ngClass"]},null),l.Qb(3,{checked:0}),(n()(),l.Ub(4,null,[" "," "]))],(function(n,e){var t=n(e,3,0,e.context.$implicit.id==e.component.checkedQm);n(e,2,0,t)}),(function(n,e){n(e,4,0,e.context.$implicit.text)}))}function _(n){return l.Wb(0,[(n()(),l.Cb(0,0,null,null,5,"div",[["class","quickMessOpt"]],null,null,null,null,null)),(n()(),l.rb(16777216,null,null,1,null,O)),l.Bb(2,278528,null,0,p.i,[l.W,l.S,l.x],{ngForOf:[0,"ngForOf"]},null),(n()(),l.Cb(3,0,null,null,2,"ion-button",[["class","sendQuickMessage"],["color","danger"]],null,[[null,"click"]],(function(n,e,t){var l=!0;return"click"===e&&(l=!1!==n.component.sendQuickMessage()&&l),l}),r.L,r.b)),l.Bb(4,49152,null,0,s.m,[l.j,l.p,l.F],{color:[0,"color"]},null),(n()(),l.Ub(-1,0,[" \u05e9\u05dc\u05d7 "]))],(function(n,e){n(e,2,0,e.component.quickMessages),n(e,4,0,"danger")}),null)}function v(n){return l.Wb(0,[l.Sb(671088640,1,{content:0}),(n()(),l.Cb(1,0,null,null,6,"ion-header",[],null,null,null,r.W,r.m)),l.Bb(2,49152,null,0,s.D,[l.j,l.p,l.F],null,null),(n()(),l.Cb(3,0,null,0,4,"ion-toolbar",[],null,null,null,r.tb,r.J)),l.Bb(4,49152,null,0,s.Eb,[l.j,l.p,l.F],null,null),(n()(),l.Cb(5,0,null,0,2,"ion-title",[],null,null,null,r.rb,r.H)),l.Bb(6,49152,null,0,s.Cb,[l.j,l.p,l.F],null,null),(n()(),l.Ub(-1,0,["dialog"])),(n()(),l.Cb(8,0,null,null,2,"div",[["class","back-btn"]],null,[[null,"click"]],(function(n,e,t){var l=!0;return"click"===e&&(l=!1!==n.component.back()&&l),l}),null,null)),(n()(),l.Cb(9,0,null,null,1,"ion-icon",[["name","ios-arrow-forward"]],null,null,null,r.X,r.n)),l.Bb(10,49152,null,0,s.E,[l.j,l.p,l.F],{name:[0,"name"]},null),(n()(),l.Cb(11,0,null,null,21,"ion-content",[["id","content"]],null,null,null,r.S,r.i)),l.Bb(12,49152,[[1,4],["content",4]],0,s.w,[l.j,l.p,l.F],{scrollEvents:[0,"scrollEvents"]},null),(n()(),l.Cb(13,0,null,0,10,"ion-card",[["class","user-block"]],null,null,null,r.P,r.d)),l.Bb(14,49152,null,0,s.o,[l.j,l.p,l.F],null,null),(n()(),l.Cb(15,0,null,0,8,"ion-list",[["lines","none"]],null,null,null,r.db,r.t)),l.Bb(16,49152,null,0,s.Q,[l.j,l.p,l.F],{lines:[0,"lines"]},null),(n()(),l.Cb(17,0,null,0,6,"ion-item",[],null,null,null,r.bb,r.r)),l.Bb(18,49152,null,0,s.J,[l.j,l.p,l.F],null,null),(n()(),l.Cb(19,0,null,0,4,"p",[["class","dialog-avatar"]],null,[[null,"click"]],(function(n,e,t){var l=!0;return"click"===e&&(l=!1!==n.component.toProfilePage()&&l),l}),null,null)),l.Rb(512,null,p.w,p.x,[l.p,l.y,l.K]),l.Bb(21,278528,null,0,p.m,[p.w],{ngStyle:[0,"ngStyle"]},null),l.Qb(22,{"background-image":0}),(n()(),l.Ub(23,null,[""," ",""])),(n()(),l.Cb(24,0,null,0,2,"div",[["class","messages"]],null,null,null,null,null)),(n()(),l.rb(16777216,null,null,1,null,P)),l.Bb(26,278528,null,0,p.i,[l.W,l.S,l.x],{ngForOf:[0,"ngForOf"]},null),(n()(),l.rb(16777216,null,0,1,null,k)),l.Bb(28,16384,null,0,p.j,[l.W,l.S],{ngIf:[0,"ngIf"]},null),(n()(),l.Cb(29,0,null,0,3,"ion-infinite-scroll",[["position","top"],["threshold","60%"]],null,[[null,"ionInfinite"]],(function(n,e,t){var l=!0;return"ionInfinite"===e&&(l=!1!==n.component.moreMessages(t)&&l),l}),r.Z,r.o)),l.Bb(30,49152,[["scroll",4]],0,s.G,[l.j,l.p,l.F],{position:[0,"position"],threshold:[1,"threshold"]},null),(n()(),l.Cb(31,0,null,0,1,"ion-infinite-scroll-content",[],null,null,null,r.Y,r.p)),l.Bb(32,49152,null,0,s.H,[l.j,l.p,l.F],null,null),(n()(),l.rb(16777216,null,null,1,null,_)),l.Bb(34,16384,null,0,p.j,[l.W,l.S],{ngIf:[0,"ngIf"]},null)],(function(n,e){var t=e.component;n(e,10,0,"ios-arrow-forward"),n(e,12,0,!0),n(e,16,0,"none");var l=n(e,22,0,"url("+t.api.url+t.user.contactImage+")");n(e,21,0,l),n(e,26,0,t.messages),n(e,28,0,t.messages),n(e,30,0,"top","60%"),n(e,34,0,t.showUl)}),(function(n,e){var t=e.component;n(e,23,0,t.texts.a_conversation_with,t.texts.name)}))}function y(n){return l.Wb(0,[(n()(),l.Cb(0,0,null,null,1,"page-dialog",[],null,null,null,v,d)),l.Bb(1,114688,null,0,a,[i.a,g.n,l.j,s.g,s.b],null,null)],(function(n,e){n(e,1,0)}),null)}var j=l.yb("page-dialog",a,y,{},{},[]);t.d(e,"DialogPageModuleNgFactory",(function(){return w}));var w=l.zb(u,[],(function(n){return l.Lb([l.Mb(512,l.m,l.jb,[[8,[c.a,j]],[3,l.m],l.D]),l.Mb(4608,p.l,p.k,[l.z,[2,p.z]]),l.Mb(4608,h.o,h.o,[]),l.Mb(4608,s.c,s.c,[l.F,l.g]),l.Mb(4608,s.Kb,s.Kb,[s.c,l.m,l.w]),l.Mb(4608,s.Nb,s.Nb,[s.c,l.m,l.w]),l.Mb(1073742336,p.b,p.b,[]),l.Mb(1073742336,h.n,h.n,[]),l.Mb(1073742336,h.d,h.d,[]),l.Mb(1073742336,s.Gb,s.Gb,[]),l.Mb(1073742336,g.p,g.p,[[2,g.u],[2,g.n]]),l.Mb(1073742336,u,u,[]),l.Mb(1024,g.l,(function(){return[[{path:"",component:a}]]}),[])])}))}}]);